<!-- 

 

<div class="card" 
     [ngClass]="getStatusClass()" 
     style="width: 18rem;">
    <img class="card-img-top" [src]="getScreenshotUrl()" alt="bug image cap" > 
    <div class="card-body">
      <h5 class="card-title">Name: {{bug?.bugName}}</h5>
      <p class="card-text">Description: {{bug?.description}}</p>
      <p class="card-text">CVSS Score : {{bug?.cvssScore}} </p>
      <p class="card-text">Submitted On : {{bug?.submittedOn}} </p>
      @if(bug?.status=="Resolved")
      {
        <p class="card-text">
        Resolved At: {{ bug?.resolvedAt ? bug?.resolvedAt : 'Yet to be resolved' }}
      </p>
      }
      @else if (bug?.status=="InProgress") {
        <p class="card-text">
        Last updated At: {{ bug?.resolvedAt ? bug?.resolvedAt : 'Yet to be resolved' }}
      </p>
      }
      @else {
        <p class="card-text">
        Resolved At: {{ bug?.resolvedAt ? bug?.resolvedAt : 'Yet to be resolved' }}
      </p>
      }
      
      <p class="card-text">Status : {{bug?.status}} </p>
      <p class="card-text" *ngIf="bug?.status === 'Assigned'">
        <p> Assigned Developer: {{ getAssignedDevName() || 'N/A' }}</p>
      <p class="card-text">Reporter Id : {{bug?.submittedById}} </p>
      <button class="btn btn-dark btn-sm enter-chat-btn" 
              [disabled]="!bug?.bugId"
              (click)="handleChatRedirect(bug!.bugId)" >Enter chat </button>
    </div>
</div>
 -->


 <div class="card h-100 d-flex flex-column" [ngClass]="getStatusClass()" style="width: 20rem;">
  <img class="card-img-top" [src]="getScreenshotUrl()" alt="bug image cap">
  
  <div class="card-body d-flex flex-column">
    <h5 class="card-title">Name: {{bug?.bugName}}</h5>
    <p class="card-text">Description: {{bug?.description}}</p>
    <p class="card-text">CVSS Score : {{bug?.cvssScore}} </p>
    <p class="card-text">Submitted On : {{bug?.submittedOn | date: 'medium' }} </p>

    @if(bug?.status=="Resolved") {
      <p class="card-text">Resolved At: {{ bug?.resolvedAt  ? (bug?.resolvedAt | date: 'medium')  : 'Yet to be resolved' }}</p>
    }
    @else if (bug?.status=="InProgress") {
      <p class="card-text">Last Updated: {{ bug?.resolvedAt  ? (bug?.resolvedAt | date: 'medium')  : 'Yet to be resolved' }}</p>
    }
    @else {
      <p class="card-text">Resolved At: {{ bug?.resolvedAt ? (bug?.resolvedAt | date: 'medium')  : 'Yet to be resolved' }}</p>
    }

    <p class="card-text">Status: {{bug?.status}}</p>
    <p class="card-text" *ngIf="bug?.status === 'Assigned' || 'InProgress'">
      Assigned Developer: {{ getAssignedDevName() || 'N/A' }}
    </p>
    <p class="card-text">Reporter ID: {{bug?.submittedById}}</p>

    <!-- Spacer to push button to bottom -->
    <div class="mt-auto pt-2">
      <button class="btn btn-dark btn-sm w-100"
              [disabled]="!bug?.bugId"
              (click)="handleChatRedirect(bug!.bugId)">
        Enter Chat
      </button>
    </div>
  </div>
</div>
